<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Chemputer Blog"><meta property="og:type" content="article"><meta property="og:image" content="img/coffee-bg.jpg"><meta property="twitter:image" content="img/coffee-bg.jpg"><meta name=title content="LearningOpenGL（二）入门"><meta property="og:title" content="LearningOpenGL（二）入门"><meta property="twitter:title" content="LearningOpenGL（二）入门"><meta name=description content="汪洋龙，程序员 ｜ 有机化学搬砖工 "><meta property="og:description" content="汪洋龙，程序员 ｜ 有机化学搬砖工 "><meta property="twitter:description" content="汪洋龙，程序员 ｜ 有机化学搬砖工 "><meta property="twitter:card" content="summary"><meta name=keyword content="汪洋龙, wangyanglong, Wangyanglong, 汪洋龙的博客, Wangyanglong Blog, 博客, 个人网站, 互联网, Web, Javascript, React"><link rel="shortcut icon" href=/img/favicon.ico><title>LearningOpenGL（二）入门 | 汪洋龙的博客 | Wangyanglong Blog</title><link rel=canonical href=/post/learnopengl/2/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link href=https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css rel=stylesheet type=text/css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-5E5ZJN0DQ4"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5E5ZJN0DQ4",{anonymize_ip:!1})}</script><style>code.has-jax{-webkit-font-smoothing:antialiased;background:inherit!important;border:none!important;font-size:100%}</style><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>Chemputer Blog</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/es6/>es6</a></li><li><a href=/categories/react/>react</a></li><li><a href=/categories/tech/>tech</a></li><li><a href=/archive//>ARCHIVE</a></li><li><a href=/notes//>NOTES</a></li><li><a href=/photos//>PHOTOS</a></li><li><a href=/about//>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/img/coffee-bg.jpg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/learningopengl title=LearningOpenGL>LearningOpenGL</a></div><h1>LearningOpenGL（二）入门</h1><h2 class=subheading></h2><span class=meta>Posted by
汪洋龙
on
Tuesday, June 20, 2023</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><h2 id=1-opengl>1. OpenGL</h2><ul><li><code>OpenGL</code> 仅仅是一个规范（<code>Specification</code>）</li><li><code>OpenGL</code> 规范没有规定实现的细节，具体的 <code>OpenGL</code> 库允许使用不同的实现，只要功能和结果与规范相匹配</li><li>实际 OpenGL 库的开发者通常是 <code>显卡的生产商</code></li></ul><h3 id=11-核心模式与立即渲染模式>1.1 核心模式与立即渲染模式</h3><ul><li>早期 OpenGL 使用 <code>立即渲染模式（Immediate mode）</code><ul><li>优点：绘图方便，容易使用和理解</li><li>不足：缺少灵活性，效率低</li></ul></li><li><code>OpenGL3.2</code>，废弃<code>立即渲染模式（Immediate mode）</code>，鼓励开发者使用<code>核心模式（Core-profile）</code></li></ul><h3 id=12-扩展>1.2 扩展</h3><p>OpenGL 支持扩展，方便显卡公司提出新特性或者渲染的优化。</p><h3 id=13-状态机>1.3 状态机</h3><p>使用 OpenGL，遇到的一些<code>状态设置函数（State-changing Function）</code> 会改变上下文，以及 <code>状态使用函数（State-using Function）</code>。</p><h3 id=14-附加资源>1.4 附加资源</h3><ul><li><a href=https://www.opengl.org/>opengl.org</a>：OpenGL 官方网站</li><li><a href=https://registry.khronos.org/OpenGL/index_gl.php>OpenGL registry</a>：包含 OpenGL 各版本的规范和扩展</li></ul><h2 id=2-创建窗口>2. 创建窗口</h2><h3 id=21-glfw>2.1 GLFW</h3><p>一个针对 OpenGL 的 C 语言库，提供一些渲染物体所需最低限度接口。</p><h3 id=22-glad>2.2 GLAD</h3><p>解决 OpenGL 驱动版本多，并且根据这个版本加载所有相关的 OpenGL 函数。</p><h2 id=3-你好窗口>3. 你好，窗口</h2><h3 id=31-双缓冲double-buffer>3.1 双缓冲（Double Buffer）</h3><p>单缓冲存在图像闪烁问题，因为生成图像不是瞬间被绘制，而是从左到右，从上到下。</p><ul><li><code>前缓冲</code>：保存最终输出的图像，它会在屏幕上显示；</li><li><code>后缓冲</code>：所有的渲染指令在此绘制；</li></ul><p>所有渲染指令执行完毕之后，<code>交换</code>（swap）前缓冲和后缓冲，消除不真实感。</p><h2 id=4-你好三角形>4. 你好，三角形</h2><ul><li><code>VAO</code>：Vertex Array Object，顶点数组对象</li><li><code>VBO</code>：Vertex Buffer Object，顶点缓冲对象</li><li><code>EBO</code>：Element Buffer Object，元素缓冲对象</li><li><code>IBO</code>：Index Buffer Object， 索引缓冲对象</li></ul><h3 id=41-图形渲染管线>4.1 图形渲染管线</h3><p>大多译为管线（Graphics Pipeline），用来处理 3D 坐标转化为 2D 坐标，并将 2D 坐标转变为实际的有颜色的像素</p><h3 id=42-管线阶段>4.2 管线阶段</h3><p><img src=/post/learnopengl/images/pipeline.png alt=管线阶段></p><ul><li>OpenGL 着色器是用 OpenGL 着色器语言(OpenGL Shading Language, <code>GLSL</code>)</li><li>蓝色部分代表可以注入自定义着色器</li></ul><h3 id=43-渲染过程>4.3 渲染过程</h3><ul><li>顶点着色器：把 3D 坐标转为另一种 3D 坐标</li><li>图元装配：将顶点着色器输出的顶点作为输入，把所有的点装配为指定图元形状（eg：GL_POINTS、GL_TRIANGLES、GL_LINE_STRIP）</li><li>几何着色器：可以通过产生新顶点构造新的图元生成其他形状</li><li>光栅化：把图元映射为最终屏幕上的像素</li><li>片段着色器：计算一个像素的最终颜色，是所有 OpenGL 高级效果产生的地方。通常，包含 3D 场景数据（eg：光照、阴影、光颜色）</li><li>Alpha 测试和混合：检测片段对应深度值，用来判断这个像素在前还是在后。</li></ul><h3 id=44-顶点输入>4.4 顶点输入</h3><ul><li>OpenGL 仅当 3D 坐标在 3 个轴（x、y 和 z）上 <code>-1.0</code> 到 <code>1.0</code> 的范围内时才处理。</li><li>这个范围内的坐标叫做<code>标准化设备坐标</code></li><li>定义数据之后，发送给顶点着色器</li><li>通过<code>VBO</code> 管理内存，它会在 GPU 内存存储大量顶点</li><li><code>VBO</code> 有一个独一无二的 ID</li></ul><h3 id=45-顶点着色器>4.5 顶点着色器</h3><h3 id=46-编译着色器>4.6 编译着色器</h3><ul><li>创建着色器对象：<code>glCreateShader</code></li><li>将着色器源码附加到着色器对象：<code>glShaderSource</code></li><li>编译：<code>glCompileShader</code></li></ul><h3 id=47-片段着色器>4.7 片段着色器</h3><h3 id=48-着色器程序>4.8 着色器程序</h3><ul><li>创建程序：<code>glCreateProgram</code></li><li>将之前编译的着色器附加到程序对象：<code>glAttachProgram</code></li><li>链接：<code>glLinkProgram</code></li><li>激活：<code>glUseProgram</code></li><li>链接到程序对象之后删除：<code>glDeleteShader</code></li></ul><h3 id=49-链接顶点属性>4.9 链接顶点属性</h3><ul><li>解析顶点数据：<code>glVertexAttribPointer</code></li><li>启用顶点数据：<code>glEnableVertexAttribArray</code></li></ul><h3 id=410-顶点数组对象>4.10 顶点数组对象</h3><h3 id=411-元素缓冲对象>4.11 元素缓冲对象</h3><h2 id=5-着色器>5. 着色器</h2><p>OpenGL 着色器语言：GLSL。类 C 语言，为图形计算量身定制</p><h3 id=51-数据类型>5.1 数据类型</h3><ul><li>基础类型：<code>int</code> <code>float</code> <code>double</code> <code>uint</code> <code>bool</code></li><li>容器类型：<code>Vector</code> <code>Matrix</code></li></ul><h3 id=52-输入输出>5.2 输入输出</h3><ul><li>用 <code>in</code> 和 <code>out</code> 关键字定义</li><li>从一个着色器向另一个着色器发送数据，必须在发送方着色器声明一个输出，在接收方着色器声明一个输入。OpenGL 会把两个变量链接在一起，实现数据发送。</li></ul><h3 id=53-uniform>5.3 Uniform</h3><ul><li>全局，在每个着色器程序中独一无二</li><li>被着色器程序任意着色器任意阶段访问</li></ul><h2 id=6-纹理>6. 纹理</h2><h3 id=61-环绕方式>6.1 环绕方式</h3><ul><li><code>GL_REPEAT</code>：默认。超出即重复</li><li><code>GL_MIRRORED_REPEAT</code></li><li><code>GL_CLAMP_TO_EDGE</code></li><li><code>GL_CLAMP_TO_BORDER</code></li></ul><h3 id=62-纹理过滤>6.2 纹理过滤</h3><ul><li>纹理坐标不依赖分辨率</li><li><code>GL_NEAREST</code>：默认。</li><li><code>GL_LINEAR</code>：基于纹理坐标附近的纹理像素，计算出一个插值</li><li><code>glTexParameter*</code> 可以指定放大缩小的过滤方式</li><li><code>glGenerateMipmaps</code> 函数来处理<code>多级渐远纹理</code>（主要使用于纹理被缩小的情况）</li></ul><h3 id=63-加载创建纹理>6.3 加载创建纹理</h3><ul><li><code>stb_image.h</code> 图像加载器，把图像转化为字节序列</li><li><code>glGenTextures</code> 创建纹理</li><li><code>glBindTexture</code> 绑定</li><li><code>glTexImage2D</code> 生成</li></ul><h3 id=64-应用纹理>6.4 应用纹理</h3><p><code>GLSL</code> 的 <code>texture</code> 函数</p><h3 id=65-纹理单元>6.5 纹理单元</h3><h2 id=7-变换>7. 变换</h2><p>通过多个矩阵（Matrix）对象实现变换（Transform）</p><h3 id=71-glm>7.1 GLM</h3><ul><li>Open<code>GL</code> <code>M</code>athematics 缩写</li><li>一个数学库</li></ul><h2 id=8-坐标系统>8. 坐标系统</h2><p>将坐标从一个坐标系变换到另一个坐标系，需要用到变换矩阵。</p><h3 id=81-局部空间>8.1 局部空间</h3><p>物体所在的坐标空间</p><h3 id=82-世界空间>8.2 世界空间</h3><h3 id=83-观察空间>8.3 观察空间</h3><h3 id=84-裁剪空间>8.4 裁剪空间</h3><p>OpenGL 期望所有坐标落在特定范围</p><ul><li>正射投影</li><li>透视投影</li></ul><h2 id=9-摄像机>9. 摄像机</h2><p>欧拉角：俯仰角 + 偏航角 + 滚转角</p><hr><ul class=pager><li class=previous><a href=/post/learnopengl/1/ data-toggle=tooltip data-placement=top title="LearningOpenGL（一）macOS M1 环境搭建">&larr;
Previous Post</a></li><li class=next><a href=/post/learnopengl/3/ data-toggle=tooltip data-placement=top title=LearningOpenGL（三）光照>Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=/tags/>FEATURED TAGS</a></h5><div class=tags><a href=/tags/blender title=blender>blender</a>
<a href=/tags/blog title=blog>blog</a>
<a href=/tags/infrastructure title=infrastructure>infrastructure</a>
<a href=/tags/learningopengl title=learningopengl>learningopengl</a>
<a href=/tags/qiankun title=qiankun>qiankun</a>
<a href=/tags/raspberrypi title=raspberrypi>raspberrypi</a>
<a href=/tags/react title=react>react</a>
<a href=/tags/ts title=ts>ts</a>
<a href=/tags/%E5%88%86%E4%BA%AB%E4%BC%9A title=分享会>分享会</a>
<a href=/tags/%E5%A5%87%E7%BB%A9%E5%88%9B%E5%9D%9B title=奇绩创坛>奇绩创坛</a>
<a href=/tags/%E8%AF%91%E6%96%87 title=译文>译文</a></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target=_blank href=https://github.com/chemistwang><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title="Chemputer Blog"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Chemputer Blog 2023<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>